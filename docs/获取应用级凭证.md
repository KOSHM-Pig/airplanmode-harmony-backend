简体中文
App
探索
设计
开发
分发
推广与变现
生态合作
支持
更多
探索
设计
开发
分发
推广与变现
生态合作
支持
搜索
文档
管理中心
HarmonyOS

版本说明
指南
API参考
最佳实践
FAQ
变更预告更多
筛选目录下的文档标题
高级筛选
API version
设备
元服务API集

只看筛选内容
您当前正在浏览HarmonyOS最新文档，覆盖已发布的所有API版本，可在API参考中筛选您使用的API版本。详细的版本配套关系请参考版本说明。
API参考应用服务Account Kit（华为账号服务）REST API开放接口调用凭证获取应用级凭证
获取应用级凭证
更新时间: 2025-10-31 12:57
注意
为了更安全的网络访问，推荐使用TLS1.2版本，关于TLS协议及加密套件的信息，可以点击这里进行详细了解：TLS协议及加密套件。

若应用服务端访问华为账号服务使用协议是TLS1.0、TLS1.1或规定外的加密套件，可能无法正常访问华为账号服务，请务必升级到TLS1.2版本。

功能介绍
应用服务端调用此接口获取应用级凭证Access Token。

场景描述
获取应用级凭证，访问被应用级权限管控的资源，例如通过OpenID获取UnionID。

使用约束
需确保调用端网络正常。
应用级Access Token的流控阈值为 1000个/5分钟，5分钟内申请Access Token超过1000个，超过该限制次数后失败。详细流控机制请参见华为OAuth应用级Access Token流控机制。
接口原型
承载协议

HTTPS POST

接口方向

开发者服务器->华为账号服务器

接口URL

https://oauth-login.cloud.huawei.com/oauth2/v3/token

数据格式

请求消息：Content-Type: application/x-www-form-urlencoded

响应消息：Content-Type: application/json;charset=UTF-8

请求参数
Request Header
参数

是否必选

参数类型

描述

Content-Type

是

String

取值为：application/x-www-form-urlencoded。

说明
Request Body传参，请务必遵循此请求头格式，否则可能导致请求失败，具体传参方式可参考示例代码。

Request Body
参数

是否必选

参数类型

描述

grant_type

是

String

授权模式，固定传值“client_credentials”。

client_id

是

String

在创建应用后，由华为开发者联盟为应用分配的唯一标识。参数取值详见查看应用基本信息中的OAuth 2.0客户端ID(凭据)-Client ID参数。

client_secret

是

String

在创建应用后，由华为开发者联盟为应用分配的密钥（Client Secret）。参数取值详见查看应用基本信息中的OAuth 2.0客户端ID(凭据)-Client Secret参数。

请求示例
POST /oauth2/v3/token HTTP/1.1
Host: oauth-login.cloud.huawei.com
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&client_id=<client_id>&client_secret=<client_secret>
响应参数
Response Header
参数

是否必选

参数类型

描述

Content-Type

是

String

取值为：application/json;charset=UTF-8。

Response Body
调用成功时，响应消息体返回如下：

参数

是否必选

参数类型

描述

token_type

是

String

固定字符串“Bearer”。

access_token

是

String

Access Token，访问被权限管控资源的凭证。Access Token长度详见Access Token和Refresh Token长度限制要求。

expires_in

是

Long

Access Token的过期时间，以秒为单位。有效期为3600秒。

调用失败时，响应消息体返回如下：

参数

参数类型

描述

error

int

业务响应主错误码，详见错误码。

sub_error

int

业务响应子错误码，详见错误码。

error_description

String

错误描述信息。

响应示例
请求成功时
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    "access_token": "<Access Token>",
    "expires_in": 3600,
    "token_type": "Bearer"
}
请求失败时
HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8

{
    "sub_error": 12304,
    "error_description": "invalid client_secret",
    "error": 1101
}
示例代码
Java示例代码如下，运行前需要进行示例代码环境配置：

import com.alibaba.fastjson2.JSONObject;
import lombok.extern.slf4j.Slf4j;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.message.BasicNameValuePair;
import org.huawei.uniaccount.util.CallUtils;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

/**
 * 获取应用级凭证
 */
@Slf4j
public class AppTokenAPIDemo {
    public static void main(String[] args) throws IOException {
        // 获取应用级凭证接口URL
        String url = "https://oauth-login.cloud.huawei.com/oauth2/v3/token";
        // 授权模式，固定传"client_credentials"
        String grantType = "client_credentials";
        // 替换为您的Client ID
        String clientId = "<Client ID>";
        // 替换为您Client ID对应的Client Secret
        String clientSecret = "<Client Secret>";
        JSONObject result = getAppToken(url, clientSecret, clientId, grantType);
        // 解析获取access_token
        String accessToken = result.getString("access_token");
        log.info("access_token: {}", accessToken);
        // 解析获取token_type
        String tokenType = result.getString("token_type");
        log.info("token_type: {}", tokenType);
        // 解析获取expires_in
        Long expiresIn = result.getLong("expires_in");
        log.info("expires_in: {}", expiresIn);
    }

    private static JSONObject getAppToken(String url, String clientSecret,
        String clientId, String grantType) throws IOException {
        HttpPost httpPost = new HttpPost(url);
        List<NameValuePair> request = new ArrayList<>();
        request.add(new BasicNameValuePair("client_secret", clientSecret));
        request.add(new BasicNameValuePair("client_id", clientId));
        request.add(new BasicNameValuePair("grant_type", grantType));
        httpPost.setEntity(new UrlEncodedFormEntity(request));
        // 如需要自定义异常处理请使用api CallUtils#remoteCall(HttpUriRequest, BiFunction<CloseableHttpResponse,String,E>)。
        return CallUtils.toJsonObject(CallUtils.remoteCallOAuth(httpPost));
    }
}

错误码
HTTP响应码

描述

解决方法

200

成功。

-

400

参数错误。

请根据业务响应主错误码以及业务响应子错误码进一步排查问题。

403

无权限访问。

请检查调用环境及配置。

404

找不到服务。

请检查请求URI是否正确。

405

不支持的http请求method。

请检查http请求method是否与接口说明一致。

500

服务内部错误。

请通过在线提单提交问题。

502

请求连接异常，常见于网络状况不稳定。

建议稍后重试，若仍无法解决，请通过在线提单提交问题。

503

系统流控。

触发系统流控，请稍后重试。

504

请求连接超时，常见于网络状况不稳定。

建议稍后重试，若仍无法解决，请通过在线提单提交问题。

590

服务内部错误。

请通过在线提单提交问题。

业务响应主错误码

业务响应子错误码

描述

解决方法

1101

12304

client_secret不正确。

请前往开发者联盟/AGC确认client_secret是否正确。

20002

client_id格式不正确。

检查client_id是否满足正则：^[0-9]{1,64}$。

20003

client_id格式不正确或系统不存在。

检查client_id是否满足正则：^[0-9]{1,64}$。
请前往开发者联盟/AGC确认client_id是否存在。
20171

client_secret为空。

请按照接口参数的要求，传入正确的client_secret参数。

20172

client_secret格式不正确。

检查client_secret格式是否满足正则：^[0-9a-zA-Z=/\\+]+$。

20182

grant_type值不正确。

grant_type可选值如下：

“authorization_code”：该场景用于获取用户级凭证。
“refresh_token”： 该场景用于刷新用户级凭证。
“client_credentials”：该场景用于获取应用级凭证。
1102

20001

client_id为空。

请按照接口参数的要求，传入正确的client_id参数。

20181

grant_type为空。

grant_type可选值如下：

“authorization_code”：该场景用于获取用户级凭证。
“refresh_token”： 该场景用于刷新用户级凭证。
“client_credentials”：该场景用于获取应用级凭证。
1203

12303

client_id在系统不存在。

请前往开发者联盟/AGC确认client_id是否存在。

500

系统内部错误。

系统内部处理错误，建议业务打印错误码信息，并请通过在线提单提交问题。

取消用户级凭证授权
获取用户信息
相关推荐
文档
刷新用户级凭证
文档
获取用户级凭证
文档
取消用户级凭证授权
文档
解析凭证
文档
通过OpenID获取UnionID
文档
实名信息校验
文档
获取实名信息
文档
通过Authorization Code获取GroupUnionID
文档
一键登录获取华为账号绑定号码和UnionID/OpenID
文档
获取验证ID Token的JWT公钥信息
意见反馈
以上内容对您是否有帮助？
意见反馈
如果您有其他疑问，您也可以通过开发者社区问答频道来和我们联系探讨。
社区提问智能客服提问
本文导读
功能介绍
场景描述
使用约束
接口原型
请求参数
Request Header
Request Body
请求示例
响应参数
Response Header
Response Body
响应示例
请求成功时
请求失败时
示例代码
错误码






华为开发者联盟 版权所有 ©2025
使用条款
华为开发者联盟用户协议
关于华为开发者联盟与隐私的声明
cookies
开源软件声明






