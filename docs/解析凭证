简体中文
App
探索
设计
开发
分发
推广与变现
生态合作
支持
更多
探索
设计
开发
分发
推广与变现
生态合作
支持
搜索
文档
管理中心
HarmonyOS

版本说明
指南
API参考
最佳实践
FAQ
变更预告更多
筛选目录下的文档标题
高级筛选
API version
设备
元服务API集

只看筛选内容
您当前正在浏览HarmonyOS最新文档，覆盖已发布的所有API版本，可在API参考中筛选您使用的API版本。详细的版本配套关系请参考版本说明。
API参考应用服务Account Kit（华为账号服务）REST API开放接口调用凭证解析凭证
解析凭证
更新时间: 2025-10-31 12:57
注意
为了更安全的网络访问，推荐使用TLS1.2版本，关于TLS协议及加密套件的信息，可以点击这里进行详细了解：TLS协议及加密套件。

若应用服务端访问华为账号服务使用协议是TLS1.0、TLS1.1或规定外的加密套件，可能无法正常访问华为账号服务，请务必升级到TLS1.2版本。

功能介绍
对已经获得的Access Token进行鉴权。
通过华为服务器解析Access Token，获取Client ID、UnionID、OpenID、scope等信息。
场景描述
应用已经获取到Access Token，要对其进行解析并获取Access Token中包含的Client ID、UnionID、OpenID、scope等信息。

使用约束
需确保调用端网络正常。

接口原型
承载协议

HTTPS POST

接口方向

开发者服务器->华为账号服务器

接口URL

https://oauth-api.cloud.huawei.com/rest.php?nsp_fmt=JSON&nsp_svc=huawei.oauth2.user.getTokenInfo

数据格式

请求消息：Content-Type: application/x-www-form-urlencoded

响应消息：Content-Type: text/plain;charset=UTF-8

请求参数
Request Header
参数

是否必选

参数类型

描述

Content-Type

是

String

取值为：application/x-www-form-urlencoded。

说明
Request Body传参，请务必遵循此请求头格式，否则可能导致请求失败，具体传参方式可参考示例代码。

Request Body
参数

是否必选

参数类型

描述

access_token

是

String

通过获取用户级凭证/刷新用户级凭证/获取应用级凭证获取到的access_token值。

open_id

否

String

需要解析用户级凭证并期望拿到OpenID时，请填写该参数，填写固定值字符串“OPENID”。

请求示例
请通过POST方式调用，示例如下：

POST /rest.php?nsp_fmt=JSON&nsp_svc=huawei.oauth2.user.getTokenInfo HTTP/1.1
Host: oauth-api.cloud.huawei.com
Content-Type: application/x-www-form-urlencoded

open_id=OPENID&access_token=<access_token>
响应参数
Response Header
参数

是否必选

参数类型

描述

Content-Type

是

String

取值为：text/plain;charset=UTF-8。

Response Body
调用成功时，响应消息体返回如下：

参数

是否必选

参数类型

描述

client_id

是

String

在创建应用后，由华为开发者联盟为应用分配的唯一标识。参数取值详见查看应用基本信息中的OAuth 2.0客户端ID(凭据)-Client ID参数。

expire_in

是

int

Access Token的过期时间，单位为秒。

union_id

否

String

用户的UnionID，由用户账号和应用开发者账号签名而成。当Access Token为用户级时才返回。具体格式要求请参考OpenID和UnionID的格式说明。

open_id

否

String

用户的OpenID，由用户账号和应用ID加密生成的，当Access Token为用户级，且入参open_id为OPENID时才返回。具体格式要求请参考OpenID和UnionID的格式说明。

scope

否

String

用户授权scope列表，当Access Token为用户级且用户授权的scope不为空时才返回。

project_id

是

String

项目ID，项目的唯一标识。

type

是

int

凭证类型。

0：通过获取用户级凭证获取的Access Token。
1：通过获取应用级凭证获取的Access Token。
调用失败时，响应消息体返回如下：

参数

参数类型

描述

error

String

错误描述信息，错误码在HTTP响应头中的NSP_STATUS字段返回，详见本章节错误码。

响应示例
请求成功时
HTTP/1.1 200 OK
Content-Type: text/plain;charset=UTF-8

{
    "union_id": "MDF9pBd6xxxxA8iaG4ZNPTw*****3fyXzG9WgUcmY8XibBvQ",
    "scope": "openid profile",
    "open_id": "MDFAMTAxMDA1MTg1QGFlMzM0OWIyOGY0*****MDRiaNTI5ODAxYTA3MDh*****A4ZTZmNTA2ZTE4ZT*****lmNGVmN2E1ZjY1OTg4NWRiaN2QxMzQy*****TU0YWQ3",
    "expire_in": 1123,
    "client_id": "12*****61",
    "project_id": "123*****789",
    "type": 0
}
请求失败时
HTTP/1.1 200 OK
Content-Type: text/plain;charset=UTF-8

{
    "error": "invalid session"
}
示例代码
Java示例代码如下，运行前需要进行示例代码环境配置：

import com.alibaba.fastjson2.JSONObject;
import lombok.extern.slf4j.Slf4j;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.message.BasicNameValuePair;
import org.huawei.uniaccount.util.CallUtils;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

/**
 * 解析凭证
 */
@Slf4j
public class GetTokenInfoAPIDemo {
    public static void main(String[] args) throws IOException {
        // 解析凭证接口URL
        String url
            = "https://oauth-api.cloud.huawei.com/rest.php?nsp_fmt=JSON&nsp_svc=huawei.oauth2.user.getTokenInfo";
        // 替换为您实际获取到的用户级凭证Access Token或应用级凭证Access Token
        String accessToken = "<Access Token>";
        JSONObject result = getClientTokenInfo(accessToken, url);
        // 解析获取client_id
        Integer type = result.getInteger("type");
        log.info("type: {}", type);
        // 解析获取scope
        String scope = result.getString("scope");
        log.info("scope: {}", scope);
        // 解析获取client_id
        Long clientId = result.getLong("client_id");
        log.info("client_id: {}", clientId);
        // 解析获取expire_in
        Integer expireIn = result.getInteger("expire_in");
        log.info("expire_in: {}", expireIn);
        // 解析获取project_id
        String projectId = result.getString("project_id");
        log.info("project_id: {}", projectId);
        // 解析获取open_id
        String openId = result.getString("open_id");
        log.info("open_id: {}", openId);
        // 解析获取client_id
        String unionId = result.getString("union_id");
        log.info("union_id: {}", unionId);
    }

    private static JSONObject getClientTokenInfo(String accessToken, String url) throws IOException {
        HttpPost httpPost = new HttpPost(url);
        List<NameValuePair> request = new ArrayList<>();
        request.add(new BasicNameValuePair("access_token", accessToken));
        request.add(new BasicNameValuePair("openid", "OPENID"));
        httpPost.setEntity(new UrlEncodedFormEntity(request));
        // 如需要自定义异常处理请使用api CallUtils#remoteCall(HttpUriRequest, BiFunction<CloseableHttpResponse,String,E>)。
        return CallUtils.toJsonObject(CallUtils.remoteCall(httpPost));
    }
}

错误码
HTTP响应码

描述

200

仅表示本次接口调用成功，实际业务处理结果需要通过Response Header中的NSP_STATUS进行判断。

400

参数错误。

请根据文档排查请求参数是否符合规范。

403

无权限访问。

请检查调用环境及配置。

404

找不到服务。

请检查请求URI是否正确。

405

不支持的http请求method。

请检查http请求method是否与接口说明一致。

500

服务内部错误。

请通过在线提单提交问题。

502

请求连接异常，常见于网络状况不稳定。

建议稍后重试，若仍无法解决，请通过在线提单提交问题。

503

触发系统流控，请稍后重试。

504

请求连接超时，常见于网络状况不稳定。

建议稍后重试，若仍无法解决，请通过在线提单提交问题。

590

服务内部错误。

请通过在线提单提交问题。

说明
Response Header中的NSP_STATUS字段，在处理成功时不会返回。

NSP_STATUS

描述

解决方法

6

access_token过期。

请重新获取新的access_token。

102

无效的access_token。

access_token参数无效，可能原因：请求头的Content-Type为application/x-www-form-urlencoded，但实际代码调用时，未对请求body参数进行URLEncode处理，可参考示例代码组装参数。

500

接口内部错误。

根据返回的错误描述进行处理，若仍无法解决，请通过在线提单提交问题。

501

服务分发异常。

检查请求URL中nsp_svc是否正确
若确认请求URL与文档一致，请通过在线提单提交问题。
31204

access_token失效。

请重新获取新的access_token。

刷新用户级凭证
取消用户级凭证授权
相关推荐
文档
获取实名信息
文档
通过OpenID获取UnionID
文档
实名信息校验
文档
获取应用级凭证
文档
刷新用户级凭证
文档
取消用户级凭证授权
文档
通过Authorization Code获取GroupUnionID
文档
获取用户级凭证
文档
获取华为账号用户信息-获取头像昵称
文档
一键登录获取华为账号绑定号码和UnionID/OpenID
意见反馈
以上内容对您是否有帮助？
意见反馈
如果您有其他疑问，您也可以通过开发者社区问答频道来和我们联系探讨。
社区提问智能客服提问
本文导读
功能介绍
场景描述
使用约束
接口原型
请求参数
Request Header
Request Body
请求示例
响应参数
Response Header
Response Body
响应示例
请求成功时
请求失败时
示例代码
错误码






华为开发者联盟 版权所有 ©2025
使用条款
华为开发者联盟用户协议
关于华为开发者联盟与隐私的声明
cookies
开源软件声明






